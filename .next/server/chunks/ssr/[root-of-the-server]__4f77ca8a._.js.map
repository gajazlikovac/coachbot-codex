{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/contexts/AsideContext.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const AsideContextProvider = registerClientReference(\n    function() { throw new Error(\"Attempted to call AsideContextProvider() from the server but AsideContextProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/contexts/AsideContext.tsx <module evaluation>\",\n    \"AsideContextProvider\",\n);\nexport const useAsideContext = registerClientReference(\n    function() { throw new Error(\"Attempted to call useAsideContext() from the server but useAsideContext is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/contexts/AsideContext.tsx <module evaluation>\",\n    \"useAsideContext\",\n);\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,uBAAuB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACtD;IAAa,MAAM,IAAI,MAAM;AAAwP,GACrR,+DACA;AAEG,MAAM,kBAAkB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,+DACA","debugId":null}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/contexts/AsideContext.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const AsideContextProvider = registerClientReference(\n    function() { throw new Error(\"Attempted to call AsideContextProvider() from the server but AsideContextProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/contexts/AsideContext.tsx\",\n    \"AsideContextProvider\",\n);\nexport const useAsideContext = registerClientReference(\n    function() { throw new Error(\"Attempted to call useAsideContext() from the server but useAsideContext is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/contexts/AsideContext.tsx\",\n    \"useAsideContext\",\n);\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,uBAAuB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACtD;IAAa,MAAM,IAAI,MAAM;AAAwP,GACrR,2CACA;AAEG,MAAM,kBAAkB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,2CACA","debugId":null}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/contexts/RootContextProvider.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const RootContextProvider = registerClientReference(\n    function() { throw new Error(\"Attempted to call RootContextProvider() from the server but RootContextProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/contexts/RootContextProvider.tsx <module evaluation>\",\n    \"RootContextProvider\",\n);\nexport const useRootContext = registerClientReference(\n    function() { throw new Error(\"Attempted to call useRootContext() from the server but useRootContext is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/contexts/RootContextProvider.tsx <module evaluation>\",\n    \"useRootContext\",\n);\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,sBAAsB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACrD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,sEACA;AAEG,MAAM,iBAAiB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAChD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,sEACA","debugId":null}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/contexts/RootContextProvider.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const RootContextProvider = registerClientReference(\n    function() { throw new Error(\"Attempted to call RootContextProvider() from the server but RootContextProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/contexts/RootContextProvider.tsx\",\n    \"RootContextProvider\",\n);\nexport const useRootContext = registerClientReference(\n    function() { throw new Error(\"Attempted to call useRootContext() from the server but useRootContext is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/contexts/RootContextProvider.tsx\",\n    \"useRootContext\",\n);\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,sBAAsB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACrD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,kDACA;AAEG,MAAM,iBAAiB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAChD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,kDACA","debugId":null}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/lib/utils/server.utils.ts"],"sourcesContent":["'server only';\n\nimport { Decimal } from '@prisma/client/runtime/library';\n\nexport function convertDecimalValues(obj: Record<string, any>): Record<string, any> {\n  const result: Record<string, any> = {};\n\n  for (const [key, value] of Object.entries(obj)) {\n    if (value instanceof Decimal) {\n      result[key] = value.toNumber();\n    } else {\n      result[key] = value;\n    }\n  }\n\n  return result;\n}\n"],"names":[],"mappings":";;;AAEA;;;;;AAFA;;AAIO,SAAS,qBAAqB,GAAwB;IAC3D,MAAM,SAA8B,CAAC;IAErC,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,OAAO,OAAO,CAAC,KAAM;QAC9C,IAAI,iBAAiB,gLAAA,CAAA,UAAO,EAAE;YAC5B,MAAM,CAAC,IAAI,GAAG,MAAM,QAAQ;QAC9B,OAAO;YACL,MAAM,CAAC,IAAI,GAAG;QAChB;IACF;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 137, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/server/db/configurationClient.ts"],"sourcesContent":["import { unstable_cache } from 'next/cache';\nimport { AssistantConfiguration, ModerationRule, ModerationTemplate, Prisma, Stage, Style } from '@prisma/client';\n\nimport prisma from '@/lib/prisma';\nimport { convertDecimalValues } from '@/lib/utils/server.utils';\n\nexport const getFullConfiguration = async (assistantId: string, full?: boolean) => {\n  try {\n    const config: any = await prisma.assistantConfiguration.findUnique({\n      where: { assistantId },\n      include: full\n        ? {\n            stages: true,\n            styles: true,\n            modelConfigs: true,\n            moderationRules: true,\n          }\n        : undefined,\n    });\n\n    return {\n      ...config,\n      modelConfigs: full ? config.modelConfigs.map(convertDecimalValues) : undefined,\n    };\n  } catch (error) {\n    console.error(`[instructionsClient] Error fetching assistant ${assistantId} full configuration:`, error);\n\n    return null;\n  }\n};\n\nexport const getAssistantStyles = unstable_cache(\n  async (assistantId: string): Promise<Style[]> => {\n    try {\n      return await prisma.style.findMany({\n        where: { AssistantConfiguration: { assistantId } },\n        orderBy: { created_at: 'asc' },\n      });\n    } catch (error) {\n      console.error(`[instructionsClient] Error fetching assistant ${assistantId} styles:`, error);\n\n      return [];\n    }\n  },\n  ['assistantStyles'],\n  { tags: ['styles'], revalidate: 3600 }\n);\n\nexport const updateAssistantStyle = async (\n  assistantId: string,\n  id: number,\n  data: Partial<Style>\n): Promise<Style | null> => {\n  try {\n    const updatedData: Prisma.StyleUpdateInput = {\n      ...data,\n      greeting_templates: data.greeting_templates || undefined,\n      response_patterns: data.response_patterns || undefined,\n      closing_templates: data.closing_templates || undefined,\n    };\n\n    return await prisma.style.update({\n      where: {\n        id,\n        AssistantConfiguration: { assistantId },\n      },\n      data: { ...updatedData },\n    });\n  } catch (error) {\n    console.error(`[instructionsClient] Error updating assistant ${assistantId} style ${id}:`, error);\n\n    return null;\n  }\n};\n\nexport const createAssistantStyle = async (\n  assistantConfigurationId: string,\n  data: Prisma.StyleCreateInput\n): Promise<Style | null> => {\n  try {\n    return await prisma.style.create({\n      data: {\n        ...data,\n        AssistantConfiguration: { connect: { id: assistantConfigurationId } },\n      },\n    });\n  } catch (error) {\n    console.error(\n      `[instructionsClient] Error creating assistant configuration ${assistantConfigurationId} style:`,\n      error\n    );\n\n    return null;\n  }\n};\n\nexport const deleteAssistantStyle = async (id: number): Promise<void> => {\n  try {\n    await await prisma.style.delete({ where: { id } });\n  } catch (error) {\n    console.error(`[instructionsClient] Error deleting style ${id}:`, error);\n  }\n};\n\nexport const updateConfigurationInstructions = async (\n  assistantId: string,\n  data: Partial<AssistantConfiguration>\n): Promise<AssistantConfiguration> => {\n  try {\n    return await prisma.assistantConfiguration.update({ where: { assistantId }, data });\n  } catch (error) {\n    console.error(`[instructionsClient] Error updating assistant ${assistantId} instructions:`, error);\n    throw new Error('Error updating assistant instructions');\n  }\n};\n\nexport const getAssistantStages = unstable_cache(\n  async (assistantId: string): Promise<Stage[]> => {\n    try {\n      return await prisma.stage.findMany({\n        where: { AssistantConfiguration: { assistantId } },\n        orderBy: { order: 'asc' },\n      });\n    } catch (error) {\n      console.error(`[instructionsClient] Error fetching assistant ${assistantId} stages:`, error);\n\n      return [];\n    }\n  },\n  ['assistantStages'],\n  { tags: ['stages'], revalidate: 3600 }\n);\n\nexport const updateAssistantStage = async (\n  assistantId: string,\n  id: string,\n  data: Prisma.StageUpdateInput\n): Promise<Stage> => {\n  try {\n    return prisma.stage.update({\n      where: { id, AssistantConfiguration: { assistantId } },\n      data: { ...data },\n    });\n  } catch (error) {\n    console.error(`[instructionsClient] Error updating assistant ${assistantId} stage ${id}:`, error);\n\n    throw new Error('Error updating assistant stage');\n  }\n};\n\nexport const updateAssistantStagesOrder = async (\n  assistantId: string,\n  stages: Pick<Stage, 'id' | 'order'>[]\n): Promise<Stage[]> => {\n  try {\n    return Promise.all(\n      stages.map((stage) =>\n        prisma.stage.update({\n          where: { id: stage.id, AssistantConfiguration: { assistantId } },\n          data: { order: stage.order },\n        })\n      )\n    );\n  } catch (error) {\n    console.error(`[instructionsClient] Error updating assistant ${assistantId} stages:`, error);\n    throw new Error('Error updating assistant stages');\n  }\n};\n\nexport const getAssistantFirstStage = unstable_cache(\n  async (assistantId: string, sortingOrder: 'asc' | 'desc' = 'asc', id?: string): Promise<Stage | null> => {\n    try {\n      const where = !!id ? { id } : { AssistantConfiguration: { assistantId } };\n\n      return prisma.stage.findFirst({\n        where,\n        orderBy: { order: sortingOrder },\n      });\n    } catch (error) {\n      console.error(`[instructionsClient] Error getting assistant ${assistantId} first stage:`, error);\n      throw new Error('Error getting assistant first stage');\n    }\n  },\n  ['assistantFirstStage'],\n  { tags: ['firstStage'] }\n);\n\nexport const createAssistantStage = async (\n  assistantConfigurationId: string,\n  { name }: Pick<Stage, 'name'>\n): Promise<Stage> => {\n  try {\n    const lastStage = await getAssistantFirstStage('', 'desc', assistantConfigurationId);\n    const order = lastStage ? lastStage.order + 1 : 1;\n\n    return prisma.stage.create({\n      data: {\n        name,\n        order,\n        AssistantConfiguration: { connect: { id: assistantConfigurationId } },\n      },\n    });\n  } catch (error) {\n    console.error(\n      `[instructionsClient] Error creating assistant configuration ${assistantConfigurationId} stage:`,\n      error\n    );\n    throw new Error('Error creating assistant stage');\n  }\n};\n\nexport const deleteAssistantStage = async (id: string): Promise<Stage> => {\n  try {\n    return prisma.stage.delete({ where: { id } });\n  } catch (error) {\n    console.error(`[instructionsClient] Error deleting assistant stage ${id}:`, error);\n    throw new Error('Error deleting assistant stage');\n  }\n};\n\nexport const getAssistantModerationRules = unstable_cache(\n  async (assistantId: string): Promise<ModerationRule[]> => {\n    try {\n      return prisma.moderationRule.findMany({\n        where: { AssistantConfiguration: { assistantId } },\n        orderBy: { created_at: 'asc' },\n        include: { ModerationTemplate: true },\n      });\n    } catch (error) {\n      console.error(`[instructionsClient] Error fetching assistant ${assistantId} moderation rules:`, error);\n\n      return [];\n    }\n  },\n  ['assistantModerationRules'],\n  { tags: ['moderationRules'], revalidate: 3600 }\n);\n\nexport const createAssistantModerationRule = async (\n  assistantConfigurationId: string,\n  data: Pick<ModerationRule, 'name' | 'custom'>\n): Promise<ModerationRule> => {\n  try {\n    return prisma.moderationRule.create({\n      data: {\n        ...data,\n        AssistantConfiguration: { connect: { id: assistantConfigurationId } },\n      },\n      include: { ModerationTemplate: true },\n    });\n  } catch (error) {\n    console.error(\n      `[instructionsClient] Error creating assistant configuration ${assistantConfigurationId} moderation rule:`,\n      error\n    );\n    throw new Error('Error creating assistant moderation rule.');\n  }\n};\n\nexport const updateAssistantModerationRule = async (\n  assistantId: string,\n  id: string,\n  data: any\n): Promise<ModerationRule> => {\n  try {\n    const updatedData: Prisma.ModerationRuleUpdateInput = {\n      ...data,\n      response_template: undefined,\n      instructions: data.instructions || undefined,\n      updated_at: new Date(),\n      ModerationTemplate: data.ModerationTemplate?.length\n        ? {\n            updateMany: data.ModerationTemplate.map((template: ModerationTemplate) => ({\n              where: {\n                id: template.id,\n                rule_id: id,\n              },\n              data: {\n                ...template,\n                updated_at: new Date(),\n              },\n            })),\n          }\n        : undefined,\n    };\n\n    return prisma.moderationRule.update({\n      where: { id, AssistantConfiguration: { assistantId } },\n      data: { ...updatedData },\n      include: { ModerationTemplate: true },\n    });\n  } catch (error) {\n    console.error(`[instructionsClient] Error updating assistant ${assistantId} moderation rule:`, error);\n    throw new Error('Error creating assistant moderation rule.');\n  }\n};\n\nexport const deleteAssistantModerationRule = async (id: string): Promise<ModerationRule> => {\n  try {\n    return prisma.moderationRule.delete({ where: { id } });\n  } catch (error) {\n    console.error(`[instructionsClient] Error deleting moderation rule ${id}:`, error);\n    throw new Error('Error deleting assistant moderation rule.');\n  }\n};\n\nexport const createAssistantModerationTemplate = async (\n  _: any,\n  data: ModerationTemplate\n): Promise<ModerationTemplate> => {\n  try {\n    return prisma.moderationTemplate.create({ data, include: { ModerationRule: true } });\n  } catch (error) {\n    console.error(`[instructionsClient] Error creating new template for moderation rule ${data.rule_id}:`, error);\n    throw new Error('Error creating assistant moderation template.');\n  }\n};\n\nexport const updateAssistantModerationTemplate = async (\n  _: any,\n  id: string,\n  data: Partial<ModerationTemplate>\n): Promise<ModerationTemplate> => {\n  try {\n    return prisma.moderationTemplate.update({ where: { id }, data, include: { ModerationRule: true } });\n  } catch (error) {\n    console.error(`[instructionsClient] Error deleting moderation template ${id}:`, error);\n    throw new Error('Error deleting assistant moderation template.');\n  }\n};\n\nexport const deleteAssistantModerationTemplate = async (id: string): Promise<ModerationTemplate> => {\n  try {\n    return prisma.moderationTemplate.delete({ where: { id } });\n  } catch (error) {\n    console.error(`[instructionsClient] Error deleting moderation template ${id}:`, error);\n    throw new Error('Error deleting assistant moderation template.');\n  }\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 543, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/server/db/assistantClient.ts"],"sourcesContent":["'use server';\n\nimport { unstable_cache } from 'next/cache';\nimport {\n  Assistant,\n  AssistantConfiguration,\n  AssistantMeta,\n  ModelConfig,\n  ModerationRule,\n  ModerationTemplate,\n  Prisma,\n  Stage,\n  Style,\n  Template,\n} from '@prisma/client';\n\nimport prisma from '@/lib/prisma';\nimport { getFullConfiguration } from './configurationClient';\n\nexport type ConfigurationRelations = {\n  modelConfigs: ModelConfig[];\n  moderationRules: (ModerationRule & { ModerationTemplate: ModerationTemplate[] })[];\n  stages: Stage[];\n  styles: Style[];\n  meta: AssistantMeta;\n  configuration: AssistantConfiguration;\n};\n\nexport const getAllTemplates = async (): Promise<Template[]> => {\n  try {\n    return prisma.template.findMany({\n      include: {\n        stages: true,\n        modelConfigs: true,\n      },\n    });\n  } catch (error) {\n    console.error(`[assistantClient] Error fetching templates:`, error);\n\n    return [];\n  }\n};\n\nexport const getUserAssitants = unstable_cache(\n  async (userId: string, include?: any): Promise<Assistant[]> => {\n    try {\n      return prisma.assistant.findMany({ where: { userId }, orderBy: { created_at: 'desc' }, include });\n    } catch (error) {\n      console.error(`[assistantClient] Error fetching assistants for user ${userId}:`, error);\n\n      return [];\n    }\n  },\n  ['userAssistants'],\n  { tags: ['assistants'], revalidate: 3600 }\n);\n\nexport const getAssistans = async (ids: string[], include?: any): Promise<Assistant[]> => {\n  try {\n    return prisma.assistant.findMany({ where: { id: { in: ids } }, include });\n  } catch (error) {\n    console.error(`[assistantClient] Error fetching assistants:`, error);\n\n    return [];\n  }\n};\n\nexport const getAssistantData = async (\n  id: string,\n  include?: any\n): Promise<(Assistant & { meta?: AssistantMeta; configuration?: AssistantConfiguration }) | null> => {\n  try {\n    return prisma.assistant.findFirst({\n      where: { id },\n      include,\n    });\n  } catch (error) {\n    console.error(`[assistantClient] Error fetching assistants ${id}:`, error);\n\n    return null;\n  }\n};\n\nexport const createUserAssistant = async (\n  userId: string,\n  data: Pick<Assistant, 'name' | 'description'>,\n  template: Template & ConfigurationRelations\n): Promise<Assistant | null> => {\n  try {\n    if (!template) {\n      console.error('[assistantClient] Could not find initial templater');\n      return null;\n    }\n\n    return prisma.$transaction(async (tx) => {\n      const { modelConfigs, stages, instructions, onboarding, onboardingAnalyzer, id } = template;\n\n      const newAssistant = await tx.assistant.create({\n        data: {\n          ...data,\n          userId,\n          templateId: id,\n        },\n      });\n\n      await tx.assistantConfiguration.create({\n        data: {\n          assistantId: newAssistant.id,\n          templateId: id,\n          instructions,\n          onboarding,\n          onboardingAnalyzer,\n          modelConfigs: {\n            createMany: {\n              data: modelConfigs.map(({ model, temperature, top_p, frequency_penalty, presence_penalty }) => ({\n                model,\n                temperature,\n                top_p,\n                frequency_penalty,\n                presence_penalty,\n              })),\n            },\n          },\n          stages: {\n            createMany: {\n              data: stages.map(({ name, instructions, analyzer, order }) => ({\n                name,\n                instructions,\n                analyzer,\n                order,\n              })),\n            },\n          },\n        },\n      });\n\n      await tx.assistantMeta.create({ data: { assistantId: newAssistant.id } });\n\n      return newAssistant;\n    });\n  } catch (error) {\n    console.error(`[assistantClient] Error creating assistant for user ${userId}:`, error);\n\n    return null;\n  }\n};\n\nexport const duplicateAssistant = async (userId: string, original: any): Promise<Assistant | null> => {\n  try {\n    if (!original) {\n      console.error('[assistantClient] No original assistant provided');\n      return null;\n    }\n\n    return prisma.$transaction(async (tx) => {\n      const { name, description, mode, meta } = original;\n      const configuration = await getFullConfiguration(original.id, true);\n\n      const newAssistant = await tx.assistant.create({\n        data: {\n          name: `${name} (copy)`,\n          description,\n          userId,\n          mode,\n        },\n      });\n\n      await tx.assistantConfiguration.create({\n        data: {\n          assistantId: newAssistant.id,\n          templateId: configuration.templateId,\n          instructions: configuration.instructions,\n          onboarding: configuration.onboarding,\n          onboardingAnalyzer: configuration.onboardingAnalyzer,\n          tokensLimit: configuration.tokensLimit,\n          usageType: configuration.usageType,\n          communicationModes: configuration.communicationModes,\n          modelConfigs: {\n            createMany: {\n              data: configuration.modelConfigs.map(\n                ({ model, temperature, top_p, frequency_penalty, presence_penalty }: ModelConfig) => ({\n                  model,\n                  temperature,\n                  top_p,\n                  frequency_penalty,\n                  presence_penalty,\n                })\n              ),\n            },\n          },\n          stages: {\n            createMany: {\n              data: configuration.stages.map(({ name, instructions, analyzer, order }: Stage) => ({\n                name,\n                instructions,\n                analyzer,\n                order,\n              })),\n            },\n          },\n        },\n      });\n\n      await tx.assistantMeta.create({\n        data: {\n          assistantId: newAssistant.id,\n          topics: meta.topics,\n          visibility: meta.visibility,\n          accessLevel: meta.accessLevel,\n          price: meta.price\n            ? {\n                create: {\n                  amount: meta.price.amount,\n                  monthly: meta.price.monthly,\n                  yearly: meta.price.yearly,\n                  currency: meta.price.currency,\n                  trialDays: meta.price.trialDays,\n                },\n              }\n            : undefined,\n        },\n      });\n\n      return newAssistant;\n    });\n  } catch (error) {\n    console.error(`[assistantClient] Error duplicating assistant for user ${userId}:`, error);\n    return null;\n  }\n};\n\nexport async function updateUserAssistant(userId: string, id: string, data: Partial<Assistant>) {\n  try {\n    return prisma.assistant.update({ where: { userId, id }, data });\n  } catch (error) {\n    console.error(`[assistantClient] Error updating user ${userId} assistant ${id}:`, error);\n\n    return null;\n  }\n}\n\nexport async function updateAssistantMeta(assistantId: string, data: Prisma.AssistantMetaUpdateInput) {\n  try {\n    return prisma.assistantMeta.update({ where: { assistantId }, data });\n  } catch (error) {\n    console.error(`[assistantClient] Error updating user assistant  ${assistantId} meta:`, error);\n\n    return null;\n  }\n}\n\nexport async function upsertAssistantPrice(assistantMetaId: string, data: Prisma.PriceConfigurationCreateInput) {\n  try {\n    return await prisma.priceConfiguration.upsert({\n      where: { assistantMetaId },\n      update: data,\n      create: {\n        ...data,\n        assistantMeta: {\n          connect: { id: assistantMetaId },\n        },\n      },\n    });\n  } catch (error) {\n    console.error(`[assistantClient] Error updating user assistant meta ${assistantMetaId} price:`, error);\n\n    return null;\n  }\n}\n\nexport async function deleteUserAssistant(userId: string, id: string) {\n  try {\n    return prisma.assistant.delete({ where: { userId, id } });\n  } catch (error) {\n    console.error(`[assistantClient] Error deleting user ${userId} assistant ${id}:`, error);\n\n    return null;\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 856, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/server/actions/assistantActions.ts"],"sourcesContent":["'use server';\n\nimport { revalidateTag } from 'next/cache';\nimport { PriceConfiguration } from '@prisma/client';\n\nimport { Assistant, AssistantConfiguration, AssistantEditable, AssistantMeta } from '@/lib/models/assistant.models';\nimport { State, Template } from '@/lib/models/common.models';\nimport { assistantPriceSchema, assistantSchema, mapRelationConfig } from '@/lib/utils/db.utils';\nimport {\n  createUserAssistant,\n  deleteUserAssistant,\n  duplicateAssistant,\n  getAllTemplates,\n  getUserAssitants,\n  updateAssistantMeta,\n  updateUserAssistant,\n  upsertAssistantPrice,\n} from '../db/assistantClient';\nimport { getFullConfiguration } from '../db/configurationClient';\nimport { getSessionUser, verifySession } from './sessionActions';\n\nexport async function getCurrentAssistant(): Promise<string> {\n  try {\n    const { assistantId } = (await verifySession()) || {};\n\n    return assistantId || '';\n  } catch (error) {\n    console.error(`[authActions] Error fetching current assistant`, error);\n\n    return '';\n  }\n}\n\nexport async function getTemplates(): Promise<Template[]> {\n  try {\n    const templates: any[] = await getAllTemplates();\n\n    return templates.map(mapRelationConfig);\n  } catch (e) {\n    console.error(`[assistantClient] Error fetching templates:`, e);\n    return [];\n  }\n}\n\nexport async function getAssistants(include?: any): Promise<Assistant[]> {\n  let userId;\n  try {\n    userId = await getSessionUser();\n\n    if (!userId) return [];\n\n    const assistants = await getUserAssitants(userId, include);\n\n    return assistants;\n  } catch (e) {\n    console.error(`[assistantClient] Error fetching assistants for user ${userId}:`, e);\n    return [];\n  }\n}\n\nexport async function upsertAssistant(\n  { template, ...assistantData }: AssistantEditable,\n  id?: string\n): Promise<State<Assistant | null>> {\n  let userId;\n  try {\n    userId = await getSessionUser();\n    let assistant;\n\n    if (!userId) return { value: null };\n\n    const parsedData = assistantSchema.safeParse({ template, ...assistantData });\n\n    if (!parsedData.success) {\n      return { errors: parsedData.error.errors.map(({ message, path }) => ({ name: path.join('.'), message })) };\n    }\n\n    if (!!id) {\n      assistant = await updateUserAssistant(userId, id, {\n        name: assistantData.name,\n        description: assistantData.description,\n        mode: assistantData.mode,\n        status: assistantData.status,\n      });\n    } else {\n      assistant = await createUserAssistant(userId, assistantData, template as any);\n    }\n\n    revalidateTag('assistants');\n\n    return { value: assistant };\n  } catch (e) {\n    console.error(`[assistantClient] Error ${!!id ? 'updating' : 'creating'} assistant for user ${userId}:`, e);\n    return { value: null, error: '' };\n  }\n}\n\nexport async function getAssistantConfiguration(\n  id?: string,\n  full: boolean = true\n): Promise<AssistantConfiguration | null> {\n  let assistantId;\n  try {\n    assistantId = id || (await getCurrentAssistant());\n\n    if (!assistantId) {\n      console.warn('Assistant not found or user not authenticated');\n      return null;\n    }\n\n    return (await getFullConfiguration(assistantId || '', full)) as any;\n  } catch (error) {\n    console.error(`[instructionsClient] Error getting assistant ${assistantId} data:`, error);\n\n    return null;\n  }\n}\n\nexport async function createCopyAssistant(assistant: Assistant): Promise<Assistant | null> {\n  try {\n    const userId = await getSessionUser();\n\n    if (!assistant || !userId) {\n      console.warn('Assistant not passed or user not authenticated!');\n      return null;\n    }\n\n    const copy = await duplicateAssistant(userId, assistant);\n    revalidateTag('assistants');\n\n    return copy;\n  } catch (error) {\n    console.error(`[instructionsClient] Error creating copy of assistant ${assistant.id}:`, error);\n\n    return null;\n  }\n}\n\nexport async function updateAssistantMetaData(id: string, data: Partial<AssistantMeta>): Promise<AssistantMeta | null> {\n  let assistantId;\n  try {\n    assistantId = id || (await getCurrentAssistant());\n\n    if (!assistantId) {\n      console.warn('Assistant not found or user not authenticated');\n      return null;\n    }\n\n    const updatedMeta = await updateAssistantMeta(assistantId, data as any);\n\n    revalidateTag('assistants');\n    return updatedMeta;\n  } catch (error) {\n    console.error(`[instructionsClient] Error getting assistant ${assistantId} data:`, error);\n\n    return null;\n  }\n}\n\nexport async function updateAssistantMetaPrice(\n  assistant: Assistant,\n  formData: FormData\n): Promise<State<PriceConfiguration | null>> {\n  let assistantId;\n  try {\n    assistantId = assistant.id || (await getCurrentAssistant());\n\n    if (!assistantId) {\n      console.warn('Assistant not found or user not authenticated');\n      return { error: 'General.errors.unexpectedError', value: null };\n    }\n    const price = [...formData].reduce((data: any, [key, value]: any) => ({ ...data, [key]: value }), {});\n    const validatedData = assistantPriceSchema.parse(price);\n\n    if (validatedData instanceof Error) {\n      return { error: validatedData.message };\n    }\n\n    const updatedPrice = await upsertAssistantPrice(assistant.meta?.id || '', {\n      ...validatedData,\n      trialDays: !!validatedData.trialDays ? 14 : null,\n    } as any);\n\n    revalidateTag('assistants');\n    return { successMessage: 'General.successMessages.dataSaved', value: updatedPrice };\n  } catch (error) {\n    console.error(`[instructionsClient] Error updating assistant ${assistantId} meta price data:`, error);\n\n    return { error: 'General.errors.unexpectedError', value: null };\n  }\n}\n\nexport async function deleteAssistant(id: string) {\n  let userId;\n  try {\n    userId = await getSessionUser();\n\n    if (!userId) return;\n\n    await deleteUserAssistant(userId, id);\n    revalidateTag('assistants');\n  } catch (error) {\n    console.error(`[assistantClient] Error removing user ${userId} assistant ${id}:`, error);\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1083, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/server/actions/instructionsActions.ts"],"sourcesContent":["'use server';\n\nimport { revalidateTag } from 'next/cache';\nimport { z } from 'zod';\n\nimport { AssistantState } from '@/app/(main)/instructions/_components/SystemInstructions';\nimport { State } from '@/lib/models/common.models';\nimport { ModerationRule, ModerationTemplate, Stage, Style } from '@/lib/models/instruction.models';\nimport {\n  categorySchema,\n  defaultModerationRule,\n  defaultStyleData,\n  instructionSchema,\n  mapModerationRule,\n  mapPrismaModerationData,\n  mapStyleData,\n  moderationRuleSchema,\n  nameSchema,\n  stageSchema,\n  styleSchema,\n} from '@/lib/utils/db.utils';\nimport {\n  createAssistantModerationRule,\n  createAssistantModerationTemplate,\n  createAssistantStage,\n  createAssistantStyle,\n  deleteAssistantModerationRule,\n  deleteAssistantModerationTemplate,\n  deleteAssistantStage,\n  deleteAssistantStyle,\n  getAssistantFirstStage,\n  getAssistantModerationRules,\n  getAssistantStages,\n  getAssistantStyles,\n  updateAssistantModerationRule,\n  updateAssistantModerationTemplate,\n  updateAssistantStage,\n  updateAssistantStagesOrder,\n  updateAssistantStyle,\n  updateConfigurationInstructions,\n} from '../db/configurationClient';\nimport { getAssistantConfiguration, getCurrentAssistant } from './assistantActions';\n\nasync function validateAndUpdateItem<S, T extends { id: S }>(\n  data: T,\n  schema: z.ZodSchema<Partial<T>>,\n  updateFunction: (assistantId: string, id: S, data: Partial<T>) => Promise<any>,\n  successMessage: string,\n  tag?: string\n): Promise<State<T>> {\n  let assistantId;\n  try {\n    assistantId = await getCurrentAssistant();\n\n    if (!assistantId) {\n      console.warn('Assistant not found or user not authenticated');\n      return { error: 'General.errors.noAssistantExist', value: null };\n    }\n\n    const parsedData = schema.safeParse(data);\n\n    if (!parsedData.success) {\n      return { errors: parsedData.error.errors.map(({ message, path }) => ({ name: path.join('.'), message })) };\n    }\n\n    const value = await updateFunction(assistantId, data.id, parsedData.data);\n\n    tag && revalidateTag(tag);\n    return { successMessage, value };\n  } catch (error) {\n    console.error(`[instructionsActions] Error during updating '${data.id}' ${tag} item : `, error);\n    return { error: 'Instructions.systemInstruction.errors.saveFailed', value: data };\n  }\n}\n\nasync function createItem<T>(\n  data: T,\n  createFunction: (assistantId: string, data: T) => Promise<T>,\n  successMessage: string,\n  tags: string[] = []\n): Promise<State<T>> {\n  let assistantConfigId;\n  try {\n    const assistantConfig = await getAssistantConfiguration();\n    assistantConfigId = assistantConfig?.id;\n\n    if (!assistantConfigId) {\n      console.warn('Assistant not found or user not authenticated');\n      return { error: 'General.errors.noAssistantExist', value: null };\n    }\n\n    const createdItem: any = await createFunction(assistantConfigId, data as T);\n    tags.forEach(revalidateTag);\n\n    return { successMessage, value: createdItem };\n  } catch (error) {\n    console.error(`[instructionsActions] Error during creating ${tags?.[0]} item`, error);\n    return { error: 'Instructions.systemInstruction.errors.saveFailed' };\n  }\n}\n\nasync function getItems<T>(getFunction: (assistantId: string) => Promise<T>, tag?: string, id?: string): Promise<T> {\n  let assistantId;\n  try {\n    assistantId = id || (await getCurrentAssistant());\n    if (!assistantId) {\n      console.warn('Assistant not found or user not authenticated');\n      return [] as T;\n    }\n\n    return getFunction(assistantId);\n  } catch (error) {\n    console.error(`[instructionsActions] Error during getting assistant '${assistantId}'  ${tag} data`, error);\n    return [] as T;\n  }\n}\n\nasync function deleteItem<T>(\n  id: T,\n  deleteFunction: (id: T) => Promise<any>,\n  successMessage: string,\n  tags: string[] = []\n): Promise<State<null>> {\n  try {\n    await deleteFunction(id);\n    tags.forEach(revalidateTag);\n\n    return { successMessage, value: null };\n  } catch (error) {\n    console.error(`[instructionsActions] Error during deleting '${id}'  ${tags[0]} data.`, error);\n    return { error: 'Instructions.systemInstruction.errors.saveFailed' };\n  }\n}\n\n// MAIN INSTRUCTIONS\nexport async function updateConfigInstructions(formData: any): Promise<State<AssistantState>> {\n  let assistantId;\n  try {\n    assistantId = (await getCurrentAssistant()) || '';\n    const formInstructions = formData?.get('instructions');\n    const formOnboarding = formData?.get('onboarding');\n    const validatedData = formInstructions && instructionSchema.parse({ instructions: formInstructions });\n\n    if (validatedData instanceof Error) {\n      return { error: validatedData.message };\n    }\n\n    const { instructions, onboarding } = await updateConfigurationInstructions(assistantId, {\n      instructions: !!formInstructions ? formInstructions : undefined,\n      onboarding: !!formOnboarding ? formOnboarding : undefined,\n    });\n    return { successMessage: 'Instructions.systemInstruction.successMessages', value: { instructions, onboarding } };\n  } catch (error) {\n    console.error(`[instructionsClient] Error updating assistant ${assistantId} instructions:`, error);\n\n    return { error: 'Instructions.systemInstruction.errors.saveFailed' };\n  }\n}\n\n// STYLES\nexport async function getStyles(): Promise<Style[]> {\n  const styles = (await getItems(getAssistantStyles, 'styles')) || [];\n\n  return styles.map(mapStyleData);\n}\n\nexport async function updateStyle(style: Style): Promise<State<Style | null>> {\n  const styleData = {\n    ...style,\n    greeting_templates: JSON.stringify(style.greeting_templates.split('\\n')),\n    response_patterns: JSON.stringify(style.response_patterns.split('\\n')),\n    closing_templates: JSON.stringify(style.closing_templates.split('\\n')),\n  };\n\n  const result = await validateAndUpdateItem<number, Style>(\n    styleData,\n    styleSchema,\n    updateAssistantStyle,\n    'Instructions.Styles.successMessage',\n    'styles'\n  );\n\n  return { ...result, value: result.value ? mapStyleData(result.value) : result.value };\n}\n\nexport async function updateStyleTitle(id: number, title: string): Promise<State<Style | null>> {\n  let assistantId;\n  try {\n    assistantId = (await getCurrentAssistant()) || '';\n    const value: any = await updateAssistantStyle(assistantId || '', id, { ...defaultStyleData, title, assistantId });\n\n    return { successMessage: 'General.successMessages.dataSaved', value: mapStyleData(value) };\n  } catch (error) {\n    console.error(`[instructionsClient] Error updating style ${id} title:`, error);\n\n    return { error: 'General.errors.unexpectedError', value: null };\n  }\n}\n\nexport async function createStyle(title: string): Promise<State<Style | null>> {\n  return createItem<any>({ ...defaultStyleData, title }, createAssistantStyle, 'General.successMessages.dataSaved', [\n    'styles',\n  ]);\n}\n\nexport async function deleteStyle(id: number): Promise<State<null>> {\n  return deleteItem(id, deleteAssistantStyle, 'General.successMessages.dataDeleted', ['styles']);\n}\n\n// STAGES\nexport async function getStages(id?: string): Promise<Stage[]> {\n  return getItems<Stage[]>(getAssistantStages, 'stages', id);\n}\n\nexport async function getFirstStage(): Promise<Stage | null> {\n  return getItems<Stage | null>(getAssistantFirstStage, 'first stage');\n}\n\nexport async function updateStage(stage: Stage, onlyName?: boolean): Promise<State<Stage>> {\n  return validateAndUpdateItem<string, Stage>(\n    stage,\n    onlyName ? nameSchema : stageSchema,\n    updateAssistantStage,\n    'Instructions.systemInstruction.successMessages',\n    'stages'\n  );\n}\nexport async function updateStageOrder(targetStage: Stage, changedOrder: number, stages: Stage[]): Promise<Stage[]> {\n  let assistantId;\n  try {\n    assistantId = await getCurrentAssistant();\n    if (!assistantId) {\n      console.warn('Assistant not found or user not authenticated');\n      return [];\n    }\n\n    const newOrder = targetStage.order + changedOrder;\n\n    const updatedStages = stages.map((stage: Stage) => {\n      if (stage.id === targetStage.id) {\n        return { ...targetStage, order: newOrder };\n      }\n\n      if (stage.order === newOrder) {\n        return { ...stage, order: stage.order - changedOrder || stage.order + changedOrder };\n      }\n\n      return stage;\n    });\n\n    await updateAssistantStagesOrder(assistantId, updatedStages);\n    ['stages', 'firstStage'].forEach(revalidateTag);\n\n    return updatedStages.sort((a, b) => a.order - b.order);\n  } catch (error) {\n    console.error(`[instructionsClient] Error updating assistant ${assistantId} stages order:`, error);\n\n    return [];\n  }\n}\n\nexport async function createStage(name: string): Promise<State<Stage | null>> {\n  return createItem<Stage>({ name } as Stage, createAssistantStage, 'General.successMessages.dataSaved', [\n    'stages',\n    'firstStage',\n  ]);\n}\n\nexport async function deleteStage(id: string): Promise<State<null>> {\n  return deleteItem(id, deleteAssistantStage, 'General.successMessages.dataDeleted', ['stages', 'firstStage']);\n}\n\n// MODERATION RULES & TEMPLATES\nexport async function getModerationRules(): Promise<ModerationRule[]> {\n  const rules = await getItems(getAssistantModerationRules, 'moderation rules');\n\n  return rules.map((rule) => mapPrismaModerationData(rule));\n}\n\nexport async function createModerationRule(name: string): Promise<State<ModerationRule | null>> {\n  const state = await createItem<any>(\n    { ...defaultModerationRule, name },\n    createAssistantModerationRule,\n    'General.successMessages.dataSaved',\n    ['moderationRules']\n  );\n\n  return { ...state, value: mapPrismaModerationData(state.value) };\n}\n\nexport async function updateModerationRule(\n  rule: ModerationRule,\n  onlyName: boolean = false,\n  selectedTemplates: ModerationTemplate[] = []\n): Promise<State<ModerationRule | null>> {\n  const state = await validateAndUpdateItem<string, ModerationRule>(\n    mapModerationRule(rule, selectedTemplates),\n    onlyName ? nameSchema : moderationRuleSchema,\n    updateAssistantModerationRule,\n    'General.successMessages.dataSaved',\n    'moderationRules'\n  );\n\n  return {\n    ...state,\n    value: state.value ? mapPrismaModerationData(state.value as any, selectedTemplates) : state.value,\n  };\n}\n\nexport async function deleteModerationRule(id: string): Promise<State<ModerationRule | null>> {\n  return deleteItem(id, deleteAssistantModerationRule, 'General.successMessages.dataDeleted', ['moderationRules']);\n}\n\nexport async function createModerationTemplate(\n  category: string,\n  rule_id?: string\n): Promise<State<ModerationTemplate | null>> {\n  if (!rule_id) return { error: 'Instructions.ModerationRules.settings.noRuleSelectedError', value: null };\n\n  const template = await createItem<ModerationTemplate>(\n    { rule_id, category, response_template: '' } as ModerationTemplate,\n    createAssistantModerationTemplate,\n    'General.successMessages.dataSaved'\n  );\n\n  return template;\n}\n\nexport async function updateModerationTemplate(\n  template: ModerationTemplate\n): Promise<State<ModerationTemplate | null>> {\n  const state = await validateAndUpdateItem<string, ModerationTemplate>(\n    template,\n    categorySchema,\n    updateAssistantModerationTemplate,\n    'General.successMessages.dataSaved'\n  );\n\n  return state;\n}\n\nexport async function deleteModerationTemplate(id: string): Promise<State<ModerationTemplate | null>> {\n  return deleteItem(id, deleteAssistantModerationTemplate, 'General.successMessages.dataDeleted');\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1446, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/shared/assistant/AssistantSelect.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const AssistantSelectBase = registerClientReference(\n    function() { throw new Error(\"Attempted to call AssistantSelectBase() from the server but AssistantSelectBase is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/assistant/AssistantSelect.tsx <module evaluation>\",\n    \"AssistantSelectBase\",\n);\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/shared/assistant/AssistantSelect.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/assistant/AssistantSelect.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,sBAAsB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACrD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,0EACA;uCAEW,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA4S,GACzU,0EACA","debugId":null}},
    {"offset": {"line": 1464, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/shared/assistant/AssistantSelect.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const AssistantSelectBase = registerClientReference(\n    function() { throw new Error(\"Attempted to call AssistantSelectBase() from the server but AssistantSelectBase is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/assistant/AssistantSelect.tsx\",\n    \"AssistantSelectBase\",\n);\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/shared/assistant/AssistantSelect.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/assistant/AssistantSelect.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,sBAAsB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACrD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,sDACA;uCAEW,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAwR,GACrT,sDACA","debugId":null}},
    {"offset": {"line": 1482, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 1492, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/shared/Button.tsx"],"sourcesContent":["import Link from 'next/link';\nimport { twMerge } from 'tailwind-merge';\n\nconst baseStyles =\n  'inline-flex border border-transparent items-center justify-center gap-x-2 rounded-lg py-2 px-5 font-medium text-base disabled:opacty-30 disabled:pointer-events-none';\n\nconst variantStyles = {\n  solid: {\n    primary:\n      'bg-dark-aquamarine text-white hover:bg-transparent hover:text-dark-aquamarine hover:border-dark-aquamarine',\n    gray: 'bg-white/[8%] border-background-border/[16%] text-light-gray hover:border-main hover:text-main',\n    aquamarine:\n      'bg-white/[8%] border-background-border/[18%] text-dark-aquamarine hover:bg-dark-aquamarine hover:text-main',\n    dark: 'bg-background text-main hover:bg-main hover:text-background ',\n    light: 'bg-main text-background hover:bg-storm-gray hover:border-main hover:text-main',\n  },\n  outline: {\n    darkGray: 'border-dark-gray text-light-gray hover:text-main hover:border-storm-gray',\n    red: 'border-salmon text-salmon hover:text-main hover:border-main',\n  },\n  dashed: {\n    gray: 'border border-dashed border-storm-gray text-light-gray hover:border-main hover:text-main',\n  },\n};\n\ntype ButtonProps = (\n  | { variant?: 'solid'; color?: keyof typeof variantStyles.solid }\n  | { variant: 'outline'; color?: keyof typeof variantStyles.outline }\n  | { variant: 'dashed'; color?: keyof typeof variantStyles.dashed }\n) &\n  (\n    | (Omit<React.ComponentPropsWithoutRef<'button'>, 'color'> & { href?: undefined })\n    | (Omit<React.ComponentPropsWithoutRef<typeof Link>, 'color'> & { href: string })\n  );\n\nexport function Button({ className, variant, color, ...props }: ButtonProps) {\n  const variantConfig: any = variant ? variantStyles[variant] : undefined;\n  className = twMerge(baseStyles, variantConfig && color && variantConfig[color], className);\n\n  return typeof props.href === 'undefined' ? (\n    <button className={twMerge('disabled:cursor-not-allowed disabled:opacity-75', className)} {...props} />\n  ) : (\n    <Link prefetch={false} className={className} {...props} />\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAEA,MAAM,aACJ;AAEF,MAAM,gBAAgB;IACpB,OAAO;QACL,SACE;QACF,MAAM;QACN,YACE;QACF,MAAM;QACN,OAAO;IACT;IACA,SAAS;QACP,UAAU;QACV,KAAK;IACP;IACA,QAAQ;QACN,MAAM;IACR;AACF;AAYO,SAAS,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,OAAoB;IACzE,MAAM,gBAAqB,UAAU,aAAa,CAAC,QAAQ,GAAG;IAC9D,YAAY,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,YAAY,iBAAiB,SAAS,aAAa,CAAC,MAAM,EAAE;IAEhF,OAAO,OAAO,MAAM,IAAI,KAAK,4BAC3B,8OAAC;QAAO,WAAW,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,mDAAmD;QAAa,GAAG,KAAK;;;;;6BAEnG,8OAAC,4JAAA,CAAA,UAAI;QAAC,UAAU;QAAO,WAAW;QAAY,GAAG,KAAK;;;;;;AAE1D","debugId":null}},
    {"offset": {"line": 1544, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/shared/FunctionalButtons.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const AccountToggleButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call AccountToggleButton() from the server but AccountToggleButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/FunctionalButtons.tsx <module evaluation>\",\n    \"AccountToggleButton\",\n);\nexport const AsideToggleButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call AsideToggleButton() from the server but AsideToggleButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/FunctionalButtons.tsx <module evaluation>\",\n    \"AsideToggleButton\",\n);\nexport const CopyToClipboardButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call CopyToClipboardButton() from the server but CopyToClipboardButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/FunctionalButtons.tsx <module evaluation>\",\n    \"CopyToClipboardButton\",\n);\nexport const ExportAssistantButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call ExportAssistantButton() from the server but ExportAssistantButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/FunctionalButtons.tsx <module evaluation>\",\n    \"ExportAssistantButton\",\n);\nexport const ExportChatButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call ExportChatButton() from the server but ExportChatButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/FunctionalButtons.tsx <module evaluation>\",\n    \"ExportChatButton\",\n);\nexport const NewAssistantButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call NewAssistantButton() from the server but NewAssistantButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/FunctionalButtons.tsx <module evaluation>\",\n    \"NewAssistantButton\",\n);\nexport const NewChatButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call NewChatButton() from the server but NewChatButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/FunctionalButtons.tsx <module evaluation>\",\n    \"NewChatButton\",\n);\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/shared/FunctionalButtons.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/FunctionalButtons.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AACO,MAAM,sBAAsB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACrD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,kEACA;AAEG,MAAM,oBAAoB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACnD;IAAa,MAAM,IAAI,MAAM;AAAkP,GAC/Q,kEACA;AAEG,MAAM,wBAAwB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACvD;IAAa,MAAM,IAAI,MAAM;AAA0P,GACvR,kEACA;AAEG,MAAM,wBAAwB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACvD;IAAa,MAAM,IAAI,MAAM;AAA0P,GACvR,kEACA;AAEG,MAAM,mBAAmB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAClD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,kEACA;AAEG,MAAM,qBAAqB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACpD;IAAa,MAAM,IAAI,MAAM;AAAoP,GACjR,kEACA;AAEG,MAAM,gBAAgB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC/C;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,kEACA;uCAEW,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAoS,GACjU,kEACA","debugId":null}},
    {"offset": {"line": 1586, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/shared/FunctionalButtons.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const AccountToggleButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call AccountToggleButton() from the server but AccountToggleButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/FunctionalButtons.tsx\",\n    \"AccountToggleButton\",\n);\nexport const AsideToggleButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call AsideToggleButton() from the server but AsideToggleButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/FunctionalButtons.tsx\",\n    \"AsideToggleButton\",\n);\nexport const CopyToClipboardButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call CopyToClipboardButton() from the server but CopyToClipboardButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/FunctionalButtons.tsx\",\n    \"CopyToClipboardButton\",\n);\nexport const ExportAssistantButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call ExportAssistantButton() from the server but ExportAssistantButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/FunctionalButtons.tsx\",\n    \"ExportAssistantButton\",\n);\nexport const ExportChatButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call ExportChatButton() from the server but ExportChatButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/FunctionalButtons.tsx\",\n    \"ExportChatButton\",\n);\nexport const NewAssistantButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call NewAssistantButton() from the server but NewAssistantButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/FunctionalButtons.tsx\",\n    \"NewAssistantButton\",\n);\nexport const NewChatButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call NewChatButton() from the server but NewChatButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/FunctionalButtons.tsx\",\n    \"NewChatButton\",\n);\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/shared/FunctionalButtons.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/FunctionalButtons.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AACO,MAAM,sBAAsB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACrD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,8CACA;AAEG,MAAM,oBAAoB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACnD;IAAa,MAAM,IAAI,MAAM;AAAkP,GAC/Q,8CACA;AAEG,MAAM,wBAAwB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACvD;IAAa,MAAM,IAAI,MAAM;AAA0P,GACvR,8CACA;AAEG,MAAM,wBAAwB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACvD;IAAa,MAAM,IAAI,MAAM;AAA0P,GACvR,8CACA;AAEG,MAAM,mBAAmB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAClD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,8CACA;AAEG,MAAM,qBAAqB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACpD;IAAa,MAAM,IAAI,MAAM;AAAoP,GACjR,8CACA;AAEG,MAAM,gBAAgB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC/C;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,8CACA;uCAEW,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAgR,GAC7S,8CACA","debugId":null}},
    {"offset": {"line": 1628, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 1638, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/shared/Logo.tsx"],"sourcesContent":["import { memo } from 'react';\nimport Image from 'next/image';\nimport Link from 'next/link';\n\nexport const Logo = memo(function Logo({ className }: { className?: string }) {\n  return (\n    <Link prefetch={false} className={`relative z-10 flex h-6 items-center sm:h-7 xl:h-8 ${className}`} href=\"/\">\n      <Image\n        src={'/images/StudioAiCoachLogo.svg'}\n        alt=\"CoachBot logo\"\n        className={'h-full w-auto'}\n        priority={true}\n        width={100}\n        height={20}\n      />\n    </Link>\n  );\n});\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAEO,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,OAAI,AAAD,EAAE,SAAS,KAAK,EAAE,SAAS,EAA0B;IAC1E,qBACE,8OAAC,4JAAA,CAAA,UAAI;QAAC,UAAU;QAAO,WAAW,CAAC,kDAAkD,EAAE,WAAW;QAAE,MAAK;kBACvG,cAAA,8OAAC,6HAAA,CAAA,UAAK;YACJ,KAAK;YACL,KAAI;YACJ,WAAW;YACX,UAAU;YACV,OAAO;YACP,QAAQ;;;;;;;;;;;AAIhB","debugId":null}},
    {"offset": {"line": 1678, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/shared/ThemeToggler.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const ThemeToggler = registerClientReference(\n    function() { throw new Error(\"Attempted to call ThemeToggler() from the server but ThemeToggler is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/ThemeToggler.tsx <module evaluation>\",\n    \"ThemeToggler\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,eAAe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,6DACA","debugId":null}},
    {"offset": {"line": 1692, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/shared/ThemeToggler.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const ThemeToggler = registerClientReference(\n    function() { throw new Error(\"Attempted to call ThemeToggler() from the server but ThemeToggler is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/ThemeToggler.tsx\",\n    \"ThemeToggler\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,eAAe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,yCACA","debugId":null}},
    {"offset": {"line": 1706, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 1716, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/shared/layout/TopNavigation.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/shared/layout/TopNavigation.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/layout/TopNavigation.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAuS,GACpU,qEACA","debugId":null}},
    {"offset": {"line": 1730, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/shared/layout/TopNavigation.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/shared/layout/TopNavigation.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/layout/TopNavigation.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAmR,GAChT,iDACA","debugId":null}},
    {"offset": {"line": 1744, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 1754, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/shared/layout/Header.tsx"],"sourcesContent":["import { getTranslations } from 'next-intl/server';\nimport { twMerge } from 'tailwind-merge';\n\nimport { PrivateRoutes } from '@/lib/constants';\nimport { getIsAllowedUser } from '@/lib/utils/common.utils';\nimport { getSessionUser } from '@/server/actions/sessionActions';\nimport { Button } from '../Button';\nimport { AsideToggleButton } from '../FunctionalButtons';\nimport { Logo } from '../Logo';\nimport { ThemeToggler } from '../ThemeToggler';\nimport TopNavigation, { NavigationOption } from './TopNavigation';\n\nconst getNavigationOptions = (hidden: boolean): NavigationOption[] => [\n  {\n    id: 'nav-dashboard',\n    label: 'General.Header.navigation.3',\n    icon: 'cbi-dashboard',\n    href: PrivateRoutes.dashboard,\n    hidden,\n  },\n  { id: 'nav-chat', label: 'General.Header.navigation.0', icon: 'cbi-messages', href: PrivateRoutes.chat },\n  {\n    id: 'nav-instructions',\n    label: 'General.Header.navigation.1',\n    icon: 'cbi-setting',\n    href: PrivateRoutes.instructions,\n  },\n  { id: 'nav-content', label: 'General.Header.navigation.2', icon: 'cbi-folder-add', href: PrivateRoutes.content },\n  {\n    id: 'nav-configuration',\n    label: 'General.Header.navigation.4',\n    icon: 'cbi-folder-add',\n    href: PrivateRoutes.configuration,\n    hidden,\n  },\n];\n\nexport default async function Header({\n  className,\n  withAsideToggle = false,\n}: {\n  className?: string;\n  withAsideToggle?: boolean;\n}) {\n  const [t, userId] = await Promise.all([getTranslations(), getSessionUser()]);\n  const isAllowedUser = getIsAllowedUser(userId);\n\n  return (\n    <header className={`flex items-center justify-between gap-x-3 py-1.5 xl:gap-x-10 2xl:gap-x-16 ${className ?? ''}`}>\n      <div className={'flex w-full items-center gap-x-5'}>\n        {withAsideToggle && (\n          <AsideToggleButton label={t('General.Header.openSidebarButton')} open={true} id=\"sidebar-toggle\" />\n        )}\n        <TopNavigation\n          className={twMerge(isAllowedUser && 'max-w-3xl flex-nowrap 2xl:max-w-4xl 3xl:max-w-5xl')}\n          variant=\"main\"\n          navigationOptions={getNavigationOptions(!isAllowedUser)}\n        />\n      </div>\n      <div className=\"flex shrink-0 items-center gap-x-5\">\n        <ThemeToggler />\n        <Logo />\n        <Button\n          variant=\"outline\"\n          color=\"darkGray\"\n          href={PrivateRoutes.account}\n          className=\"cbi-profile-circle px-3 text-xl\"\n        />\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AAEA,MAAM,uBAAuB,CAAC,SAAwC;QACpE;YACE,IAAI;YACJ,OAAO;YACP,MAAM;YACN,MAAM,uHAAA,CAAA,gBAAa,CAAC,SAAS;YAC7B;QACF;QACA;YAAE,IAAI;YAAY,OAAO;YAA+B,MAAM;YAAgB,MAAM,uHAAA,CAAA,gBAAa,CAAC,IAAI;QAAC;QACvG;YACE,IAAI;YACJ,OAAO;YACP,MAAM;YACN,MAAM,uHAAA,CAAA,gBAAa,CAAC,YAAY;QAClC;QACA;YAAE,IAAI;YAAe,OAAO;YAA+B,MAAM;YAAkB,MAAM,uHAAA,CAAA,gBAAa,CAAC,OAAO;QAAC;QAC/G;YACE,IAAI;YACJ,OAAO;YACP,MAAM;YACN,MAAM,uHAAA,CAAA,gBAAa,CAAC,aAAa;YACjC;QACF;KACD;AAEc,eAAe,OAAO,EACnC,SAAS,EACT,kBAAkB,KAAK,EAIxB;IACC,MAAM,CAAC,GAAG,OAAO,GAAG,MAAM,QAAQ,GAAG,CAAC;QAAC,CAAA,GAAA,wPAAA,CAAA,kBAAe,AAAD;QAAK,CAAA,GAAA,0IAAA,CAAA,iBAAc,AAAD;KAAI;IAC3E,MAAM,gBAAgB,CAAA,GAAA,sIAAA,CAAA,mBAAgB,AAAD,EAAE;IAEvC,qBACE,8OAAC;QAAO,WAAW,CAAC,0EAA0E,EAAE,aAAa,IAAI;;0BAC/G,8OAAC;gBAAI,WAAW;;oBACb,iCACC,8OAAC,mIAAA,CAAA,oBAAiB;wBAAC,OAAO,EAAE;wBAAqC,MAAM;wBAAM,IAAG;;;;;;kCAElF,8OAAC,yIAAA,CAAA,UAAa;wBACZ,WAAW,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,iBAAiB;wBACpC,SAAQ;wBACR,mBAAmB,qBAAqB,CAAC;;;;;;;;;;;;0BAG7C,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,8HAAA,CAAA,eAAY;;;;;kCACb,8OAAC,sHAAA,CAAA,OAAI;;;;;kCACL,8OAAC,wHAAA,CAAA,SAAM;wBACL,SAAQ;wBACR,OAAM;wBACN,MAAM,uHAAA,CAAA,gBAAa,CAAC,OAAO;wBAC3B,WAAU;;;;;;;;;;;;;;;;;;AAKpB","debugId":null}},
    {"offset": {"line": 1891, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/shared/Loaders.tsx"],"sourcesContent":["import { memo } from 'react';\nimport { twMerge } from 'tailwind-merge';\n\nimport { Logo } from './Logo';\n\nexport const Spinner = memo(function Spinner({\n  className,\n  withText,\n  text,\n  textClassName,\n  icon = 'cbi-Loader',\n}: {\n  className?: string;\n  withText?: boolean;\n  text?: string;\n  textClassName?: string;\n  icon?: string;\n}) {\n  return (\n    <>\n      <p className={twMerge('flex items-center gap-x-3 text-xl', className)}>\n        <span className={twMerge('gradient-loader inline-flex animate-spin text-xl', icon)}></span>\n        {withText && <span className={twMerge('text-sm text-light-gray', textClassName)}>{text ?? 'Loading...'}</span>}\n      </p>\n    </>\n  );\n});\n\nexport const FullScreenLoader = memo(function FullScreenLoader({ className }: { className?: string }) {\n  return (\n    <>\n      <main className={twMerge('flex h-svh w-svw flex-col items-center justify-center', className)}>\n        <div className=\"flex flex-col items-center gap-y-7\">\n          <Logo className=\"h-8 sm:h-10 xl:h-12\" />\n          <Spinner withText={true} className=\"text-2xl\" />\n        </div>\n      </main>\n    </>\n  );\n});\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAEA;;;;;AAEO,MAAM,wBAAU,CAAA,GAAA,qMAAA,CAAA,OAAI,AAAD,EAAE,SAAS,QAAQ,EAC3C,SAAS,EACT,QAAQ,EACR,IAAI,EACJ,aAAa,EACb,OAAO,YAAY,EAOpB;IACC,qBACE;kBACE,cAAA,8OAAC;YAAE,WAAW,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,qCAAqC;;8BACzD,8OAAC;oBAAK,WAAW,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,oDAAoD;;;;;;gBAC5E,0BAAY,8OAAC;oBAAK,WAAW,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,2BAA2B;8BAAiB,QAAQ;;;;;;;;;;;;;AAIlG;AAEO,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,OAAI,AAAD,EAAE,SAAS,iBAAiB,EAAE,SAAS,EAA0B;IAClG,qBACE;kBACE,cAAA,8OAAC;YAAK,WAAW,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,yDAAyD;sBAChF,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,sHAAA,CAAA,OAAI;wBAAC,WAAU;;;;;;kCAChB,8OAAC;wBAAQ,UAAU;wBAAM,WAAU;;;;;;;;;;;;;;;;;;AAK7C","debugId":null}},
    {"offset": {"line": 1972, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/shared/Layout.tsx"],"sourcesContent":["import { ReactNode, Suspense } from 'react';\nimport dynamic from 'next/dynamic';\nimport { twMerge } from 'tailwind-merge';\n\nimport { AsideContextProvider } from '@/contexts/AsideContext';\nimport AssistantSelect from './assistant/AssistantSelect';\nimport Header from './layout/Header';\nimport { FullScreenLoader } from './Loaders';\nimport { Logo } from './Logo';\n\nconst Sidebar = dynamic(() => import('@/shared/Sidebar'), {\n  loading: () => <div className=\"w-0\"></div>,\n});\n\ninterface LayoutProps {\n  children: ReactNode;\n  sidebarContent?: ReactNode;\n  mainClassName?: string;\n}\n\nexport function AuthLayout({ children }: { children: ReactNode }) {\n  return (\n    <main className=\"flex h-svh w-svw flex-col items-center justify-center\">\n      <section className=\"justify-ceneter flex min-w-0 max-w-3xl flex-col items-center gap-10 md:flex-row lg:w-[50vw]\">\n        <div className=\"basisi-1/2 flex min-w-0 shrink-0 flex-grow flex-col\">\n          <Logo className=\"!h-10 sm:!h-14 xl:h-14\" />\n        </div>\n        <div className=\"relative flex shrink-0 flex-grow basis-1/2 flex-col rounded-xl border border-storm-gray bg-white/[8%] p-6\">\n          <Suspense>{children}</Suspense>\n        </div>\n      </section>\n    </main>\n  );\n}\n\nexport function MainLayout({ children, mainClassName, sidebarContent }: LayoutProps) {\n  return (\n    <AsideContextProvider isOpen={false}>\n      <Suspense fallback={<FullScreenLoader />}>\n        <main\n          className={twMerge(\n            'fixed-container flex h-full max-h-dvh max-w-full flex-nowrap p-2.5 md:flex-row',\n            mainClassName\n          )}\n        >\n          {sidebarContent && <Sidebar titleClassName=\"min-h-14\">{sidebarContent}</Sidebar>}\n\n          <section className=\"flex max-h-dvh min-h-0 w-full flex-grow flex-col gap-y-2 overflow-y-auto overflow-x-hidden\">\n            <Header withAsideToggle={true}></Header>\n            <div className=\"relative flex min-h-0 flex-grow flex-col\">\n              <AssistantSelect />\n              {children}\n            </div>\n          </section>\n        </main>\n      </Suspense>\n    </AsideContextProvider>\n  );\n}\n\nexport function WithSidebarLayout({ children, sidebar }: { children: ReactNode; sidebar: ReactNode }) {\n  return (\n    <AsideContextProvider isOpen={false}>\n      <section className=\"relative flex flex-grow rounded-xl\">\n        {sidebar}\n        <div className=\"flex min-h-0 min-w-0 flex-grow basis-full flex-col\">{children}</div>\n      </section>\n    </AsideContextProvider>\n  );\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAEA,MAAM,UAAU,CAAA,GAAA,+JAAA,CAAA,UAAO,AAAD,EAAE;;;;;;IACtB,SAAS,kBAAM,8OAAC;YAAI,WAAU;;;;;;;AASzB,SAAS,WAAW,EAAE,QAAQ,EAA2B;IAC9D,qBACE,8OAAC;QAAK,WAAU;kBACd,cAAA,8OAAC;YAAQ,WAAU;;8BACjB,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,sHAAA,CAAA,OAAI;wBAAC,WAAU;;;;;;;;;;;8BAElB,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,qMAAA,CAAA,WAAQ;kCAAE;;;;;;;;;;;;;;;;;;;;;;AAKrB;AAEO,SAAS,WAAW,EAAE,QAAQ,EAAE,aAAa,EAAE,cAAc,EAAe;IACjF,qBACE,8OAAC,gIAAA,CAAA,uBAAoB;QAAC,QAAQ;kBAC5B,cAAA,8OAAC,qMAAA,CAAA,WAAQ;YAAC,wBAAU,8OAAC,yHAAA,CAAA,mBAAgB;;;;;sBACnC,cAAA,8OAAC;gBACC,WAAW,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EACf,kFACA;;oBAGD,gCAAkB,8OAAC;wBAAQ,gBAAe;kCAAY;;;;;;kCAEvD,8OAAC;wBAAQ,WAAU;;0CACjB,8OAAC,kIAAA,CAAA,UAAM;gCAAC,iBAAiB;;;;;;0CACzB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,8IAAA,CAAA,UAAe;;;;;oCACf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOf;AAEO,SAAS,kBAAkB,EAAE,QAAQ,EAAE,OAAO,EAA+C;IAClG,qBACE,8OAAC,gIAAA,CAAA,uBAAoB;QAAC,QAAQ;kBAC5B,cAAA,8OAAC;YAAQ,WAAU;;gBAChB;8BACD,8OAAC;oBAAI,WAAU;8BAAsD;;;;;;;;;;;;;;;;;AAI7E","debugId":null}},
    {"offset": {"line": 2157, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/shared/onboarding/OnboardingTour.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/shared/onboarding/OnboardingTour.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/onboarding/OnboardingTour.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA4S,GACzU,0EACA","debugId":null}},
    {"offset": {"line": 2171, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/shared/onboarding/OnboardingTour.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/shared/onboarding/OnboardingTour.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/shared/onboarding/OnboardingTour.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAwR,GACrT,sDACA","debugId":null}},
    {"offset": {"line": 2185, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 2195, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefangajanovic/Desktop/coachbot/coachbot-codex/src/app/%28main%29/layout.tsx"],"sourcesContent":["import { ReactNode } from 'react';\nimport { NextStepProvider } from 'nextstepjs';\n\nimport { AsideContextProvider } from '@/contexts/AsideContext';\nimport { RootContextProvider } from '@/contexts/RootContextProvider';\nimport { getAssistants, getCurrentAssistant } from '@/server/actions/assistantActions';\nimport { getFirstStage } from '@/server/actions/instructionsActions';\nimport { getUser } from '@/server/actions/userActions';\nimport { MainLayout } from '@/shared/Layout';\nimport OnboardingTour from '@/shared/onboarding/OnboardingTour';\n\nexport default async function Layout({ sidebar, children }: { sidebar: ReactNode; children: ReactNode }) {\n  const assistantId = await getCurrentAssistant();\n\n  return (\n    <RootContextProvider\n      firstStage$={getFirstStage()}\n      assistants$={getAssistants()}\n      user$={getUser()}\n      sessionAssistantId={assistantId}\n    >\n      <AsideContextProvider isOpen={false}>\n        <MainLayout sidebarContent={sidebar}>{children}</MainLayout>\n        <NextStepProvider>\n          <OnboardingTour user$={getUser()} />\n        </NextStepProvider>\n      </AsideContextProvider>\n    </RootContextProvider>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AAEe,eAAe,OAAO,EAAE,OAAO,EAAE,QAAQ,EAA+C;IACrG,MAAM,cAAc,MAAM,CAAA,GAAA,4IAAA,CAAA,sBAAmB,AAAD;IAE5C,qBACE,8OAAC,uIAAA,CAAA,sBAAmB;QAClB,aAAa,CAAA,GAAA,+IAAA,CAAA,gBAAa,AAAD;QACzB,aAAa,CAAA,GAAA,4IAAA,CAAA,gBAAa,AAAD;QACzB,OAAO,CAAA,GAAA,uIAAA,CAAA,UAAO,AAAD;QACb,oBAAoB;kBAEpB,cAAA,8OAAC,gIAAA,CAAA,uBAAoB;YAAC,QAAQ;;8BAC5B,8OAAC,wHAAA,CAAA,aAAU;oBAAC,gBAAgB;8BAAU;;;;;;8BACtC,8OAAC,qJAAA,CAAA,mBAAgB;8BACf,cAAA,8OAAC,8IAAA,CAAA,UAAc;wBAAC,OAAO,CAAA,GAAA,uIAAA,CAAA,UAAO,AAAD;;;;;;;;;;;;;;;;;;;;;;AAKvC","debugId":null}}]
}